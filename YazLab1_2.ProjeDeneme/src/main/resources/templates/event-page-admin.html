<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Etkinlik Sayfası</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/event-page.css}"> <!-- CSS dosyasını dahil ediyoruz -->
</head>
<body>


<div class="container-fluid">
    <!-- Üst Başlık -->
    <div class="header">
        <h2>Etkinlik Sayfası</h2>
        <div class="profile-area">
            <!-- javascript ile bir önceki sayfaya dinamik olarak geçişi sağlar -->
            <!--
                  <a href="javascript:history.back()" class="btn btn-secondary btn-back">Ana Sayfa</a>
            -->

            <a th:href="@{/kullanicilar/adminPage}" class="btn btn-secondary btn-back">Ana Sayfa</a>

        </div>
    </div>

    <div th:if="${success}" class="alert alert-success" role="alert">
        <p th:text="${success}"></p>
    </div>

    <div th:if="${error}" class="alert alert-danger d-flex align-items-center justify-content-between" role="alert">
        <p th:text="${error}"></p>
        <div class="btn-group dropdown">
            <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                Uygun Etkinlikler
            </button>
            <ul class="dropdown-menu">
                <li th:each="dropListEtkinlik : ${dropList}">
                    <a class="dropdown-item" th:text="${dropListEtkinlik}"></a>
                </li>
            </ul>
        </div>
    </div>

    <div th:if="${error2}" class="alert alert-danger d-flex align-items-center justify-content-between" role="alert">
        <p th:text="${error2}"></p>
        <div class="btn-group dropdown">
            <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                Uygun Etkinlikler
            </button>
            <ul class="dropdown-menu">
                <li th:each="dropListEtkinlik : ${dropList}">
                    <a class="dropdown-item" th:text="${dropListEtkinlik}"></a>
                </li>
            </ul>
        </div>
    </div>


    <div class="row mt-5">

        <!-- Sol Sidebar -->
        <div class="col-md-3 sidebar-left">
            <!-- Etkinlik Detayları -->
            <div class="mb-4">
                <h4>Etkinlik Detayları</h4>
                <form th:action="@{/etkinlikler/updateAdmin/{id}(id=${etkinlik.id})}" method="post">

                    <div>
                        <img th:src="${etkinlik.resimUrl}" alt="Etkinlik Resmi" class="event-img">
                    </div>

                    <div class="mb-3">
                        <label for="etkinlikAdi" class="form-label">Etkinlik Adı</label>
                        <input type="text" id="etkinlikAdi" class="form-control" name="etkinlikAdi" th:value="${etkinlik.etkinlikAdi}">
                    </div>
                    <div class="mb-3">
                        <label for="aciklama" class="form-label">Açıklama</label>
                        <input type="text" id="aciklama" class="form-control" name="aciklama" th:value="${etkinlik.aciklama}">
                    </div>
                    <div class="mb-3">
                        <label for="etkinlikSuresi" class="form-label">Etkinlik Süresi (Saat)</label>
                        <input type="number" id="etkinlikSuresi" class="form-control" name="etkinlikSuresi" th:value="${etkinlik.etkinlikSuresi}">
                    </div>
                    <div class="mb-3">
                        <label for="konum" class="form-label">Konum</label>
                        <input type="text" id="konum" class="form-control" name="konum" th:value="${etkinlik.konum}">
                    </div>
                    <div class="mb-3">
                        <label for="kategori" class="form-label">Kategori</label>
                        <input type="text" id="kategori" class="form-control" name="kategori" th:value="${etkinlik.kategori}">
                    </div>
                    <div class="mb-3">
                        <label for="saat" class="form-label">Saat</label>
                        <input type="time" id="saat" class="form-control" name="saat" th:value="${etkinlik.saat}">
                    </div>
                    <div class="mb-3">
                        <label for="tarih" class="form-label">Tarih</label>
                        <input type="date" id="tarih" class="form-control" name="tarih" th:value="${#dates.format(etkinlik.tarih, 'yyyy-MM-dd')}">
                    </div>
                    <div class="mb-3">
                        <label for="resimUrl" class="form-label">Resim URL</label>
                        <input type="url" id="resimUrl" class="form-control" name="resimUrl" th:value="${etkinlik.resimUrl}">
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Güncelle</button>
                </form>
            </div>
        </div>


        <!-- Sağ Sidebar -->
        <div class="col-md-4 sidebar-right">
            <h4>Etkinliğin Rota ve Konum Bilgileri</h4>
            <div class="map-container" style="width: 100%; height: 500px; margin-top: 20px;">
                <!-- Google Maps Embed -->
                <iframe
                        width="100%"
                        height="100%"
                        frameborder="0"
                        style="border:0;"
                        allowfullscreen
                        aria-hidden="false"
                        tabindex="0"
                        th:src="@{'https://www.google.com/maps/embed/v1/place?key=AIzaSyBODSH7CR1JZ4efxeijzxRZgiPN5SWcZLA&q=' + ${etkinlik.konum}}">
                </iframe>
            </div>
        </div>

        <!-- Ana İçerik -->
        <div class="col-md-4 main-content">
            <!-- Mesajlaşma Paneli -->
            <h4>Etkinlik Mesajlaşma Paneli</h4>

        </div>
    </div>


</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
